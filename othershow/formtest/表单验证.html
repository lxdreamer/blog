<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form method="post" action="" onsubmit="return eg.regCheck();">
    <input type="hidden" name="" id="errnum" value="0">
    账户：<input type="text" name="" id="userid"/> </br> </br>
    密码：<input type="password" name="" id="userpwd"/> </br> </br>
    确认：<input type="password" name="" id="userpwd2"/></br> </br>
    邮箱:<input type="text" name="" id="email"/> </br> </br>
    性别<input type="radio" name="sex" value="1" checked="checked">男
    <input type="radio" name="sex" value="0">女<br/><br/>
    年龄<select name="" id="age">
    <option value="0" selected="selected">请选择年龄段</option>
    <option value="1">18岁以下</option>
    <option value="2">18-30岁</option>
        </select><br/><br/>
    爱好:<input type="checkbox" value="1" name="like" class="like">
    上网<input type="checkbox" value="2" name="like" class="like">
    逛街<input type="checkbox" value="3" name="like" class="like">
    看电影<input type="checkbox" value="4" name="like" class="like">
    其他<br/><br/>
    <textarea name="" rows="4" cols="18" id="about"></textarea></br> </br>
    <input type="submit" value="注册" id="regBtn">
    <input type="button" name="" id="regUnclock" value="解锁" style="display: none" onclick="eg.unclock()">
</form>
<script>
    var eg={};
    eg.$=function (id) {
        return document.getElementById(id);
    };
    eg.regCheck=function () {
        var uid=eg.$("userid");
        var upwd=eg.$("userpwd");
        var upwd2=eg.$("userpwd2");
        var num=eg.$("errnum");
        var about=eg.$("about");
        if(uid.value==""){
            alert("用户名不能为空");
            eg.err();
            return false;
        }
        if(upwd.value==""){
            alert("密码不能为空");
            eg.err();
            return false;
        }
        if(upwd.value!=upwd2.value){
            alert("确认密码与密码不一致");
            eg.err();
            return false;
        }
        var email=eg.$("email");
        if(!/^[A-Za-z\d]+[A-Za-z\d\.]*@[A-Za-z\d]+\.[A-Za-z]{2,4}$/.test(email.value)){
            alert("邮箱不对");
            eg.err();
            return false;
        }
        if(about.value.length>2){
            alert("太长");
            eg.err();
            return false;
        }
        var age=eg.$("age");
        if(age.value==0){
            alert("请选择年龄");
            eg.err();
            return false;
        }
        var likes=document.getElementsByClassName("like");
        var likeNum=0;
        for(var i=0;i<likes.length;i++)
        {
            if(likes[i].checked){
                likeNum++;
            }
        }
        if(likeNum==0){
            alert("请至少选择一个项目");
            eg.err();
            return false;
        }
        return true;
    };
    eg.err=function () {
        var el=eg.$("errnum");
        var old=el.value;
        el.value=parseInt(old)+1;
        eg.lock();
    };
    eg.lock=function () {
        var err=eg.$("errnum");
        if(parseInt(err.value)>2){
            eg.$("regBtn").disabled=true;
            eg.$("regUnclock").style.display="block";
        }
                };
    eg.unclock=function () {
        eg.$("errnum").value=0;
        eg.$("regBtn").disabled=false;
        eg.$("regUnclock").style.display="none";
    }
</script>
</body>
</html>